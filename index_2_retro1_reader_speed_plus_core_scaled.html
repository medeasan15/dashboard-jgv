<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard Retro Classic – Fire Dept Accents (Base V2 + Resize kiri 500px 16:9)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@600;700&family=IBM+Plex+Mono:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{ --text:#fff5e1; --muted:#f3d7a2; --accent:#b22222; --accent2:#d4af37; --panel:#1b0f0f; --panel2:#2a1717; --stroke:rgba(212,175,55,.45); --glass:rgba(212,175,55,.10); }
*{box-sizing:border-box}
body{margin:0;background:transparent;color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
.dashboard-container{position:fixed;right:10px;bottom:35px;width:300px;display:grid;gap:8px;pointer-events:none}
.card{background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--stroke);border-radius:12px;box-shadow:0 0 0 1px rgba(212,175,55,.12),0 10px 22px rgba(0,0,0,.45),inset 0 0 0 1px rgba(255,255,255,.03);overflow:hidden;opacity:.96;pointer-events:auto;transition:all .25s ease}
.card .inner{padding:8px 10px 14px;display:flex;flex-direction:column;gap:6px}

/* Buttons A/B/C/D */
.custom-buttons{display:flex;justify-content:space-around;margin-bottom:8px}
.custom-btn{width:34px;height:34px;border-radius:50%;border:1px solid var(--stroke);background:var(--glass);color:var(--text);font-size:14px;font-weight:700;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 0 6px rgba(212,175,55,.25)}
.custom-btn:hover{background:rgba(212,175,55,.15)}
/* icon sizing for A/B buttons */
.custom-btn svg{width:18px;height:18px;display:block;margin:auto}


/* Search Float (YouTube) */
.search-float{pointer-events:auto;position:absolute;top:0;right:calc(300px + 12px);width:300px;max-height:100%;display:flex;flex-direction:column;background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--stroke);border-radius:12px;box-shadow:0 0 18px rgba(0,0,0,.45),0 8px 28px rgba(0,0,0,.35);padding:8px;opacity:.98;backdrop-filter:blur(2px);z-index:9999}
.hidden{display:none!important}
.search-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.search-title{font-weight:700;font-size:12px;letter-spacing:.06em;color:var(--muted)}
.search-close{border:1px solid var(--stroke);background:var(--glass);color:var(--text);border-radius:8px;padding:2px 8px;cursor:pointer}
.search-list{overflow:auto;flex:1;display:flex;flex-direction:column;gap:8px}
.search-item{display:flex;gap:8px;align-items:center;padding:6px;border:1px solid rgba(212,175,55,.25);border-radius:8px;background:rgba(178,34,34,.10);cursor:pointer}
.search-item:hover{background:rgba(178,34,34,.16)}
.search-thumb{width:64px;height:40px;background:#000;border-radius:6px;overflow:hidden;flex:0 0 auto}
.search-thumb img{width:100%;height:100%;object-fit:cover}
.search-title-line{font-size:11px;color:var(--text);line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}

/* YouTube Card */
.media-card{display:none;width:300px;position:relative}
.media-card.active{display:block}
/* expanded ke kiri, tidak menyentuh tepi atas/bawah */
p0px;height: calc(600px * 10 / 16)}
.media-card .inner{padding:8px 10px;display:flex;flex-direction:column;gap:6px;height:100%}
.media-mini{display:flex;gap:6px;align-items:center}
.media-mini input{flex:1;font-size:11px;padding:6px 8px;color:var(--text);background:#231515;border:1px solid var(--stroke);border-radius:8px;outline:none}
.btn{border:1px solid var(--stroke);background:var(--glass);color:var(--text);padding:6px 10px;border-radius:8px;cursor:pointer;font-size:12px;font-weight:700}
#yt-player{width:100%;height:100%;flex:1;border-radius:10px;overflow:hidden;background:#000;box-shadow:0 0 12px rgba(212,175,55,.25)}
.media-ctrl{display:grid;grid-template-columns:auto auto auto 1fr;gap:6px;align-items:center}
.vol{display:flex;gap:6px;align-items:center}
.vol input[type=range]{width:100%;height:4px;-webkit-appearance:none;background:#0f0a0a;border-radius:3px;border:1px solid var(--stroke)}
.vol input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:50%;background:var(--accent2);box-shadow:0 0 6px rgba(212,175,55,.6)}
#yt-status{grid-column:1 / -1;font-size:10px;color:var(--muted)}

/* Spotify Card (embed URL) */
.spotify-card{display:none}
.spotify-card.active{display:block}
.spotify-card .inner{padding:8px 10px;display:flex;flex-direction:column;gap:6px}
.sp-mini{display:flex;gap:6px;align-items:center}
.sp-mini input{flex:1;font-size:11px;padding:6px 8px;color:var(--text);background:#231515;border:1px solid var(--stroke);border-radius:8px;outline:none}
.sp-btn{border:1px solid var(--stroke);background:var(--glass);color:var(--text);padding:6px 10px;border-radius:8px;cursor:pointer;font-size:12px;font-weight:700}
#sp-player{width:100%;height:112px;border-radius:10px;overflow:hidden;background:#000;box-shadow:0 0 12px rgba(212,175,55,.25)}
#sp-status{font-size:10px;color:var(--muted)}

/* Speedometer */
.speed-row{display:grid;grid-template-columns:1fr 1fr;align-items:center;gap:8px}
.speed-left{display:flex;align-items:center;gap:6px}
.unit{font-size:10px;letter-spacing:.14em;text-transform:uppercase;color:var(--muted);padding:2px 6px;border:1px solid var(--stroke);border-radius:6px;background:var(--glass)}
#speed-value{font-family:"IBM Plex Mono",monospace;font-size:28px;font-weight:700;color:var(--text)}
#speed-unit{font-size:10px;color:var(--muted);letter-spacing:.16em;text-transform:uppercase;font-weight:700;margin-left:4px}
.gear-inline{display:flex;align-items:center;justify-content:flex-end;gap:6px}
.gear-inline .gear-text{font-size:11px;color:var(--muted);letter-spacing:.10em;text-transform:uppercase}
#gear-value{font-family:"IBM Plex Mono",monospace;font-size:20px;font-weight:700;color:var(--text)}
.stats-row{display:grid;grid-template-columns:1fr 1fr;gap:4px;margin-top:4px}
.stat-box{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2px;background:transparent}
.stat-label{font-size:11px;color:var(--muted);letter-spacing:.10em;text-transform:uppercase;margin-bottom:2px}
.stat-value{font-family:"IBM Plex Mono",monospace;font-size:18px;font-weight:700;color:var(--text)}
.health-stat-bar{margin-top:6px}
.health-head{display:flex;justify-content:space-between;align-items:center}
.health-head .health-label{font-size:11px;color:var(--muted);letter-spacing:.10em;text-transform:uppercase}
#health-value{font-family:"IBM Plex Mono",monospace;font-size:18px;font-weight:700;color:var(--text)}
.health-bar-background{height:4px;background:#0f0a0a;border:1px solid var(--stroke);border-radius:4px;overflow:hidden;margin-top:2px}
#health-bar{height:100%;width:100%;background:linear-gradient(90deg,var(--accent2),var(--accent))}
.horizontal-indicators-container{display:flex;justify-content:center;gap:10px;margin-top:6px;flex-wrap:wrap}
.icon{flex:0 1 auto;width:17px;height:17px;display:flex;align-items:center;justify-content:center;border-radius:50%;border:1px solid var(--stroke);background:var(--glass);fill:var(--muted);stroke:var(--muted);padding:2px}
.icon.active{fill:var(--accent2);stroke:var(--accent2);box-shadow:0 0 5px rgba(212,175,55,.55),0 0 10px rgba(178,34,34,.45)}

/* Icon sizing for A/B buttons with external images */
.custom-btn img{
  width:20px;
  height:auto;
  display:block;
  margin:auto;
}


/* Icon sizing for A/B and full buttons with external images */
.custom-btn img,
#btn-full img{
  width:20px;
  height:auto;
  display:block;
  margin:auto;
}


/* Icon sizing for A/B buttons and resize button */
.custom-btn img,
#yt-resize img{
  width:20px;
  height:auto;
  display:block;
  margin:auto;
  pointer-events:none; /* allow button click-through */
}


/* Expanded panel size and position */
.media-card.expanded{
  position:fixed;
  right:calc(300px + 20px);
  bottom:50px;
  width:600px;
  height:calc(600px * 10 / 16);
  z-index:9999;
}


/* Make video area dominant in expanded mode */
.media-card.expanded .inner{ padding:8px 10px 8px; gap:6px; height:100%; }
.media-card.expanded #yt-player{ width:100%; height:calc(100% - 92px); }
.media-card.expanded #yt-player iframe{ width:100%; height:100%; display:block; }
.media-card.expanded .media-mini{ margin-bottom:4px; }
.media-card.expanded .media-ctrl{ margin-top:6px; }

</style>
</head>
<body>
<div class="dashboard-container">
  <!-- Search results (YouTube) -->
  <div id="yt-search-float" class="search-float hidden">
    <div class="search-head">
      <div class="search-title">Hasil Pencarian</div>
      <button class="search-close" id="yt-search-close">×</button>
    </div>
    <div class="search-list" id="yt-search-list"></div>
  </div>

  <!-- MEDIA: YouTube (hidden by default, toggle by A) -->
  <div class="media-card card" id="media-panel">
    <div class="inner">
      <div class="media-mini">
        <input id="yt-url" placeholder="Ketik kata kunci YouTube…">
        <button class="btn" id="yt-load">Cari</button>
      </div>
      <div id="yt-player"></div>
      <div class="media-ctrl">
        <button class="btn" id="yt-play">Play</button>
        <button class="btn" id="yt-pause">Pause</button>
        <button class="btn" id="yt-resize"><img src="https://cdn-icons-png.flaticon.com/512/5642/5642608.png" alt=""/></button>
        <div class="vol">
          <span style="font-size:11px;color:var(--muted)">VOL</span>
          <input type="range" id="yt-volume" min="0" max="100" value="20">
        </div>
        <div id="yt-status">Idle · <span id="yt-time">0:00</span></div>
      </div>
    </div>
  </div>

  <!-- SPOTIFY (hidden by default, toggle by B) -->
  <div class="spotify-card card" id="spotify-panel">
    <div class="inner">
      <div class="sp-mini">
        <input id="sp-url" placeholder="Tempel URL Spotify (track/album/playlist)…">
        <button class="sp-btn" id="sp-load">Putar</button>
      </div>
      <div id="sp-player"></div>
      <div id="sp-status">Tempel URL Spotify lalu klik Putar. Tidak perlu login Premium.</div>
    </div>
  </div>

  <!-- SPEEDOMETER -->
  <div class="speedometer-container card" id="speed-card">
    <div class="inner">
      <div class="custom-buttons">
        <div class="custom-btn" id="btn-A"><img src="https://upload.wikimedia.org/wikipedia/commons/e/ef/Youtube_logo.png" alt="" /></div>
        <div class="custom-btn" id="btn-B"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/Spotify_logo_without_text.svg/1200px-Spotify_logo_without_text.svg.png" alt="" /></div>
        <div class="custom-btn" id="btn-C">C</div>
        <div class="custom-btn" id="btn-D">D</div>
      </div>

      <div class="speed-row">
        <div class="speed-left">
          <div class="unit">Speed</div> <span id="speed-value">000</span><span id="speed-unit">km/h</span>
        </div>
        <div class="gear-inline"><span class="gear-text">GEAR</span><span id="gear-value">N</span></div>
      </div>

      <div class="stats-row">
        <div class="stat-box">
          <div class="stat-label">RPM</div>
          <div class="stat-value" id="rpm-value">0000</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">FUEL</div>
          <div class="stat-value" id="fuel-value">100</div>
        </div>
      </div>

      <div class="health-stat-bar">
        <div class="health-head">
          <div class="health-label">HEALTH</div>
          <div id="health-value">100%</div>
        </div>
        <div class="health-bar-background"><div id="health-bar"></div></div>
      </div>

      <div class="horizontal-indicators-container">
        <svg id="left-indicator-icon" class="icon" viewBox="0 0 24 24"><path d="M14 7l-5 5 5 5V7z"/></svg>
        <svg id="engine-icon" class="icon" viewBox="0 0 24 24"><path d="M3 10h2v4H3v-4zm18 0h-2v4h2v-4zM7 7h10v10H7V7z"/></svg>
        <svg id="headlights-icon" class="icon" viewBox="0 0 24 24"><circle cx="8" cy="12" r="3"/><path d="M12 9h8M12 12h8M12 15h8"/></svg>
        <svg id="seatbelt-icon" class="icon" viewBox="0 0 24 24"><path d="M5 7l14 10M19 7L5 17"/></svg>
        <svg id="right-indicator-icon" class="icon" viewBox="0 0 24 24"><path d="M10 7l5 5-5 5V7z"/></svg>
      </div>
    </div>
  </div>
</div>

<!-- Hubungkan ke indikator game -->
<script>
(function(){
  function $(id){ return document.getElementById(id); }
  function setText(id, val){ var el = $(id); if(!el) return; el.textContent = (val==null?'':String(val)); }
  // --- Formatting helper for speed only ---
  function tidyNumber(v){
    if (v == null || v === '') return '';
    var n = Number(v);
    if (isNaN(n)) return String(v);
    return (Math.abs(n - Math.round(n)) < 0.001) ? String(Math.round(n)) : n.toFixed(1);
  }
  // SPEED + UNIT via compat
  window.setSpeed       = function(v){ setText('speed-value', tidyNumber(v)); setText('speedvalue', tidyNumber(v)); };
  window.setSpeedUnit   = function(u){ setText('speed-unit', String(u ?? '')); setText('speedunit', String(u ?? '')); };
  // Restore simple readers for other elements (no rounding, just show as sent)
  window.setRPM = function(v){
  var sv = (v==null?'':String(v));
  var n = Number(sv);
  if(!isNaN(n)){
    if(n >= 0 && n <= 1) n = n * 1000; // scale 0..1 -> ratusan (0.2 => 200)
    var out = Math.round(n);
    setText('rpm-value', out);
    var fill = document.getElementById('rpm-bar-fill'); if(fill){
      var pct = (n <= 1 ? n*100 : (n/1000)*100); // 0..100 scale vs thousands
      pct = Math.max(0, Math.min(100, pct));
      fill.style.width = pct + '%';
    }
  } else {
    setText('rpm-value', sv);
  }
};
  window.setGear  = function(v){ setText('gear-value', v); };
  window.setFuel = function(v){
  var sv = (v==null?'':String(v));
  if(sv.indexOf('%') !== -1){ setText('fuel-value', sv.replace('%','')); return; }
  var n = Number(sv);
  if(!isNaN(n)){
    if(n >= 0 && n <= 1) n = n * 100; // 0..1 -> persentase
    var out = Math.round(n);
    setText('fuel-value', out);
  } else {
    setText('fuel-value', sv);
  }
};
  window.setHealth = function(v){
  var sv = (v==null?'':String(v));
  var n;
  if(sv.indexOf('%') !== -1){
    n = Number(sv.replace(/%/g,''));
  } else {
    n = Number(sv);
  }
  if(!isNaN(n)){
    if(n >= 0 && n <= 1) n = n * 100; // 0..1 -> persentase 1-100
    var out = Math.round(n);
    setText('health-value', out);
    var bar = document.getElementById('health-bar'); if(bar){
      var pct = Math.max(0, Math.min(100, out));
      bar.style.width = pct + '%';
    }
  } else {
    setText('health-value', sv);
  }
};
  function handleCompat(data){
    try{
      if(!data) return;
      // only speed/unit are guaranteed here, but also accept rpm/gear/fuel/health when provided
      if(data.speed!=null || data.Speed!=null || data.speedValue!=null || data['speed-value']!=null || data.s!=null){
        var speed = data.speed ?? data.Speed ?? data.speedValue ?? data['speed-value'] ?? data.s; window.setSpeed(speed);
      }
      if(data.unit!=null || data.Unit!=null || data.speedUnit!=null || data['speed-unit']!=null || data.u!=null){
        var unit  = data.unit  ?? data.Unit  ?? data.speedUnit  ?? data['speed-unit']  ?? data.u; window.setSpeedUnit(unit);
      }
      if(data.rpm!=null  || data.RPM!=null  || data['rpm-value']!=null  || data.r!=null){ window.setRPM( data.rpm ?? data.RPM ?? data['rpm-value'] ?? data.r ); }
      if(data.gear!=null || data.Gear!=null || data['gear-value']!=null || data.g!=null){ window.setGear(data.gear ?? data.Gear ?? data['gear-value'] ?? data.g); }
      if(data.fuel!=null || data.Fuel!=null || data['fuel-value']!=null || data.f!=null){ window.setFuel(data.fuel ?? data.Fuel ?? data['fuel-value'] ?? data.f); }
      if(data.health!=null|| data.Health!=null|| data['health-value']!=null|| data.h!=null){ window.setHealth(data.health ?? data.Health ?? data['health-value'] ?? data.h); }
    }catch(e){}
  }
  window.addEventListener('message', function(ev){
    var d = ev && ev.data;
    if(typeof d === 'string'){
      var m = d.match(/^(speed|unit|rpm|gear|fuel|health)[:=]\s*(.+)$/i);
      if(m){ var k=m[1].toLowerCase(), v=m[2];
        if(k==='speed') window.setSpeed(v); else if(k==='unit') window.setSpeedUnit(v);
        else if(k==='rpm') window.setRPM(v); else if(k==='gear') window.setGear(v);
        else if(k==='fuel') window.setFuel(v); else if(k==='health') window.setHealth(v);
        return; }
      try{ d = JSON.parse(d); }catch(_){ d = null; }
    }
    if(d) handleCompat(d);
  });
})();
</script>


</body>
</html>
