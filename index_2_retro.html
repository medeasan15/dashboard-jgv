<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard Retro Classic – Fire Dept Accents (Base V2 + Resize kiri 500px 16:9)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@600;700&family=IBM+Plex+Mono:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{ --text:#fff5e1; --muted:#f3d7a2; --accent:#b22222; --accent2:#d4af37; --panel:#1b0f0f; --panel2:#2a1717; --stroke:rgba(212,175,55,.45); --glass:rgba(212,175,55,.10); }
*{box-sizing:border-box}
body{margin:0;background:transparent;color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
.dashboard-container{position:fixed;right:10px;bottom:35px;width:300px;display:grid;gap:8px;pointer-events:none}
.card{background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--stroke);border-radius:12px;box-shadow:0 0 0 1px rgba(212,175,55,.12),0 10px 22px rgba(0,0,0,.45),inset 0 0 0 1px rgba(255,255,255,.03);overflow:hidden;opacity:.96;pointer-events:auto;transition:all .25s ease}
.card .inner{padding:8px 10px 14px;display:flex;flex-direction:column;gap:6px}

/* Buttons A/B/C/D */
.custom-buttons{display:flex;justify-content:space-around;margin-bottom:8px}
.custom-btn{width:34px;height:34px;border-radius:50%;border:1px solid var(--stroke);background:var(--glass);color:var(--text);font-size:14px;font-weight:700;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 0 6px rgba(212,175,55,.25)}
.custom-btn:hover{background:rgba(212,175,55,.15)}

/* Search Float (YouTube) */
.search-float{pointer-events:auto;position:absolute;top:0;right:calc(300px + 12px);width:300px;max-height:100%;display:flex;flex-direction:column;background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--stroke);border-radius:12px;box-shadow:0 0 18px rgba(0,0,0,.45),0 8px 28px rgba(0,0,0,.35);padding:8px;opacity:.98;backdrop-filter:blur(2px);z-index:9999}
.hidden{display:none!important}
.search-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.search-title{font-weight:700;font-size:12px;letter-spacing:.06em;color:var(--muted)}
.search-close{border:1px solid var(--stroke);background:var(--glass);color:var(--text);border-radius:8px;padding:2px 8px;cursor:pointer}
.search-list{overflow:auto;flex:1;display:flex;flex-direction:column;gap:8px}
.search-item{display:flex;gap:8px;align-items:center;padding:6px;border:1px solid rgba(212,175,55,.25);border-radius:8px;background:rgba(178,34,34,.10);cursor:pointer}
.search-item:hover{background:rgba(178,34,34,.16)}
.search-thumb{width:64px;height:40px;background:#000;border-radius:6px;overflow:hidden;flex:0 0 auto}
.search-thumb img{width:100%;height:100%;object-fit:cover}
.search-title-line{font-size:11px;color:var(--text);line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}

/* YouTube Card */
.media-card{display:none;width:300px;position:relative}
.media-card.active{display:block}
/* expanded ke kiri, tidak menyentuh tepi atas/bawah */
.media-card.expanded{position:fixed;right:calc(300px + 20px);bottom:50px;width:500px;height:calc(500px * 9 / 16)}
.media-card .inner{padding:8px 10px;display:flex;flex-direction:column;gap:6px;height:100%}
.media-mini{display:flex;gap:6px;align-items:center}
.media-mini input{flex:1;font-size:11px;padding:6px 8px;color:var(--text);background:#231515;border:1px solid var(--stroke);border-radius:8px;outline:none}
.btn{border:1px solid var(--stroke);background:var(--glass);color:var(--text);padding:6px 10px;border-radius:8px;cursor:pointer;font-size:12px;font-weight:700}
#yt-player{width:100%;height:100%;flex:1;border-radius:10px;overflow:hidden;background:#000;box-shadow:0 0 12px rgba(212,175,55,.25)}
.media-ctrl{display:grid;grid-template-columns:auto auto auto 1fr;gap:6px;align-items:center}
.vol{display:flex;gap:6px;align-items:center}
.vol input[type=range]{width:100%;height:4px;-webkit-appearance:none;background:#0f0a0a;border-radius:3px;border:1px solid var(--stroke)}
.vol input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:50%;background:var(--accent2);box-shadow:0 0 6px rgba(212,175,55,.6)}
#yt-status{grid-column:1 / -1;font-size:10px;color:var(--muted)}

/* Spotify Card (embed URL) */
.spotify-card{display:none}
.spotify-card.active{display:block}
.spotify-card .inner{padding:8px 10px;display:flex;flex-direction:column;gap:6px}
.sp-mini{display:flex;gap:6px;align-items:center}
.sp-mini input{flex:1;font-size:11px;padding:6px 8px;color:var(--text);background:#231515;border:1px solid var(--stroke);border-radius:8px;outline:none}
.sp-btn{border:1px solid var(--stroke);background:var(--glass);color:var(--text);padding:6px 10px;border-radius:8px;cursor:pointer;font-size:12px;font-weight:700}
#sp-player{width:100%;height:112px;border-radius:10px;overflow:hidden;background:#000;box-shadow:0 0 12px rgba(212,175,55,.25)}
#sp-status{font-size:10px;color:var(--muted)}

/* Speedometer */
.speed-row{display:grid;grid-template-columns:1fr 1fr;align-items:center;gap:8px}
.speed-left{display:flex;align-items:center;gap:6px}
.unit{font-size:10px;letter-spacing:.14em;text-transform:uppercase;color:var(--muted);padding:2px 6px;border:1px solid var(--stroke);border-radius:6px;background:var(--glass)}
#speed-value{font-family:"IBM Plex Mono",monospace;font-size:28px;font-weight:700;color:var(--text)}
#speed-unit{font-size:10px;color:var(--muted);letter-spacing:.16em;text-transform:uppercase;font-weight:700;margin-left:4px}
.gear-inline{display:flex;align-items:center;justify-content:flex-end;gap:6px}
.gear-inline .gear-text{font-size:11px;color:var(--muted);letter-spacing:.10em;text-transform:uppercase}
#gear-value{font-family:"IBM Plex Mono",monospace;font-size:20px;font-weight:700;color:var(--text)}
.stats-row{display:grid;grid-template-columns:1fr 1fr;gap:4px;margin-top:4px}
.stat-box{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2px;background:transparent}
.stat-label{font-size:11px;color:var(--muted);letter-spacing:.10em;text-transform:uppercase;margin-bottom:2px}
.stat-value{font-family:"IBM Plex Mono",monospace;font-size:18px;font-weight:700;color:var(--text)}
.health-stat-bar{margin-top:6px}
.health-head{display:flex;justify-content:space-between;align-items:center}
.health-head .health-label{font-size:11px;color:var(--muted);letter-spacing:.10em;text-transform:uppercase}
#health-value{font-family:"IBM Plex Mono",monospace;font-size:18px;font-weight:700;color:var(--text)}
.health-bar-background{height:4px;background:#0f0a0a;border:1px solid var(--stroke);border-radius:4px;overflow:hidden;margin-top:2px}
#health-bar{height:100%;width:100%;background:linear-gradient(90deg,var(--accent2),var(--accent))}
.horizontal-indicators-container{display:flex;justify-content:center;gap:10px;margin-top:6px;flex-wrap:wrap}
.icon{flex:0 1 auto;width:17px;height:17px;display:flex;align-items:center;justify-content:center;border-radius:50%;border:1px solid var(--stroke);background:var(--glass);fill:var(--muted);stroke:var(--muted);padding:2px}
.icon.active{fill:var(--accent2);stroke:var(--accent2);box-shadow:0 0 5px rgba(212,175,55,.55),0 0 10px rgba(178,34,34,.45)}
</style>
</head>
<body>
<div class="dashboard-container">
  <!-- Search results (YouTube) -->
  <div id="yt-search-float" class="search-float hidden">
    <div class="search-head">
      <div class="search-title">Hasil Pencarian</div>
      <button class="search-close" id="yt-search-close">×</button>
    </div>
    <div class="search-list" id="yt-search-list"></div>
  </div>

  <!-- MEDIA: YouTube (hidden by default, toggle by A) -->
  <div class="media-card card" id="media-panel">
    <div class="inner">
      <div class="media-mini">
        <input id="yt-url" placeholder="Ketik kata kunci YouTube…">
        <button class="btn" id="yt-load">Cari</button>
      </div>
      <div id="yt-player"></div>
      <div class="media-ctrl">
        <button class="btn" id="yt-play">Play</button>
        <button class="btn" id="yt-pause">Pause</button>
        <button class="btn" id="yt-resize">Full</button>
        <div class="vol">
          <span style="font-size:11px;color:var(--muted)">VOL</span>
          <input type="range" id="yt-volume" min="0" max="100" value="20">
        </div>
        <div id="yt-status">Idle · <span id="yt-time">0:00</span></div>
      </div>
    </div>
  </div>

  <!-- SPOTIFY (hidden by default, toggle by B) -->
  <div class="spotify-card card" id="spotify-panel">
    <div class="inner">
      <div class="sp-mini">
        <input id="sp-url" placeholder="Tempel URL Spotify (track/album/playlist)…">
        <button class="sp-btn" id="sp-load">Putar</button>
      </div>
      <div id="sp-player"></div>
      <div id="sp-status">Tempel URL Spotify lalu klik Putar. Tidak perlu login Premium.</div>
    </div>
  </div>

  <!-- SPEEDOMETER -->
  <div class="speedometer-container card" id="speed-card">
    <div class="inner">
      <div class="custom-buttons">
        <div class="custom-btn" id="btn-A">A</div>
        <div class="custom-btn" id="btn-B">B</div>
        <div class="custom-btn" id="btn-C">C</div>
        <div class="custom-btn" id="btn-D">D</div>
      </div>

      <div class="speed-row">
        <div class="speed-left">
          <div class="unit">Speed</div>
          <div><span id="speed-value">000</span><span id="speed-unit">km/h</span></div>
        </div>
        <div class="gear-inline"><span class="gear-text">GEAR</span><span id="gear-value">N</span></div>
      </div>

      <div class="stats-row">
        <div class="stat-box">
          <div class="stat-label">RPM</div>
          <div class="stat-value" id="rpm-value">0000</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">FUEL</div>
          <div class="stat-value" id="fuel-value">100</div>
        </div>
      </div>

      <div class="health-stat-bar">
        <div class="health-head">
          <div class="health-label">HEALTH</div>
          <div id="health-value">100%</div>
        </div>
        <div class="health-bar-background"><div id="health-bar"></div></div>
      </div>

      <div class="horizontal-indicators-container">
        <svg id="left-indicator-icon" class="icon" viewBox="0 0 24 24"><path d="M14 7l-5 5 5 5V7z"/></svg>
        <svg id="engine-icon" class="icon" viewBox="0 0 24 24"><path d="M3 10h2v4H3v-4zm18 0h-2v4h2v-4zM7 7h10v10H7V7z"/></svg>
        <svg id="headlights-icon" class="icon" viewBox="0 0 24 24"><circle cx="8" cy="12" r="3"/><path d="M12 9h8M12 12h8M12 15h8"/></svg>
        <svg id="seatbelt-icon" class="icon" viewBox="0 0 24 24"><path d="M5 7l14 10M19 7L5 17"/></svg>
        <svg id="right-indicator-icon" class="icon" viewBox="0 0 24 24"><path d="M10 7l5 5-5 5V7z"/></svg>
      </div>
    </div>
  </div>
</div>

<!-- Hubungkan ke indikator game -->
<script src="scripts.js.download"></script>

<script>
  // Toggle panels via A/B
  document.getElementById('btn-A').addEventListener('click', ()=>{
    const yt = document.getElementById('media-panel');
    yt.classList.toggle('active');
    document.getElementById('spotify-panel').classList.remove('active');
  });
  document.getElementById('btn-B').addEventListener('click', ()=>{
    const sp = document.getElementById('spotify-panel');
    sp.classList.toggle('active');
    document.getElementById('media-panel').classList.remove('active');
  });

  // YT Iframe API + kontrol
  (function(){
    let apiLoaded=false, player=null, waitingId=null; const $=id=>document.getElementById(id);
    const statusEl=$("yt-status"), volEl=$("yt-volume"), urlEl=$("yt-url"), timeEl=$("yt-time"), resizeBtn=$("yt-resize"), mediaPanel=$("media-panel");
    function setStatus(t){ if(statusEl) statusEl.textContent=t; }
    function inject(){ if(apiLoaded) return; const s=document.createElement('script'); s.src='https://www.youtube.com/iframe_api'; s.async=true; s.onerror=()=>setStatus('Gagal memuat YouTube API.'); document.head.appendChild(s); apiLoaded=true; }
    window.onYouTubeIframeAPIReady=function(){ if(waitingId) ensure(waitingId); };
    function parseId(url){ if(!url) return null; const p=[/(?:v=|vi=)([A-Za-z0-9_-]{11})/,/youtu\.be\/([A-Za-z0-9_-]{11})/,/youtube\.com\/live\/([A-Za-z0-9_-]{11})/,/youtube\.com\/shorts\/([A-Za-z0-9_-]{11})/]; for(const r of p){ const m=url.match(r); if(m&&m[1]) return m[1]; } const m2=url.match(/([A-Za-z0-9_-]{11})/); return m2?m2[1]:null; }
    function ensure(videoId){ if(!videoId) return; if(!window.YT||!window.YT.Player){ waitingId=videoId; inject(); return; }
      waitingId=null; if(player){ try{ player.loadVideoById(videoId); setStatus('Loaded: '+videoId); return; }catch(e){ try{player.destroy();}catch(_){} player=null; }}
      player=new YT.Player('yt-player',{videoId, playerVars:{autoplay:0,controls:1,rel:0,playsinline:1,origin:location.origin,enablejsapi:1}, events:{ onReady(){ try{ if(volEl) volEl.value='20'; player.setVolume(20); player.unMute&&player.unMute(); }catch(_){}
          setStatus('Ready — press Play.');
          if(window.__ytTicker) clearInterval(window.__ytTicker);
          window.__ytTicker=setInterval(()=>{ try{ if(!player||!timeEl) return; const t=Math.floor(player.getCurrentTime()||0); const mm=String(Math.floor(t/60)); const ss=String(t%60).padStart(2,'0'); timeEl.textContent=mm+':'+ss; }catch(_){} },500);
        }, onStateChange(e){ const m={"-1":"Unstarted","0":"Ended","1":"Playing","2":"Paused","3":"Buffering","5":"Cued"}; setStatus(m[String(e.data)]||('State: '+e.data)); } }});
    }
    const loadBtn=$("yt-load"), playBtn=$("yt-play"), pauseBtn=$("yt-pause");
    if(loadBtn) loadBtn.addEventListener('click',()=>{ const raw=(urlEl&&urlEl.value||'').trim(); const id=parseId(raw);
      if(!raw){ try{ window.toggleSearch && window.toggleSearch(); }catch(_){} setStatus('Masukkan kata kunci lalu pilih hasil.'); return; }
      if(id){ ensure(id); } else { try{ window.__ytDoSearch && window.__ytDoSearch(raw); }catch(_){} }
    });
    if(playBtn) playBtn.addEventListener('click',()=>{ try{ player&&player.playVideo(); }catch(_){} });
    if(pauseBtn) pauseBtn.addEventListener('click',()=>{ try{ player&&player.pauseVideo(); }catch(_){} });
    if(resizeBtn) resizeBtn.addEventListener('click',()=>{ mediaPanel.classList.toggle('expanded'); });
    if(volEl) volEl.addEventListener('input',()=>{ try{ if(!player) return; let v=parseInt(volEl.value,10)||0; v=Math.max(0,Math.min(100,v)); player.setVolume(v); if(v===0) player.mute&&player.mute(); else player.unMute&&player.unMute(); }catch(_){} });
    window.__ytEnsure = ensure;
  })();

  // Spotify (embed URL)
  (function(){
    const urlEl=document.getElementById('sp-url');
    const loadBtn=document.getElementById('sp-load');
    const playerEl=document.getElementById('sp-player');
    const statusEl=document.getElementById('sp-status');
    function setStatus(t){ if(statusEl) statusEl.textContent=t; }
    function normalizeToEmbed(url){ if(!url) return null; try{ const u=new URL(url); if(u.hostname.includes('open.spotify.com')){ const path=u.pathname.replace(/\/$/,''); return `https://open.spotify.com/embed${path}${u.search||''}`; } if(/^[A-Za-z0-9]{22}$/.test(url)) return `https://open.spotify.com/embed/track/${url}`; } catch(_){ if(/^[A-Za-z0-9]{22}$/.test(url)) return `https://open.spotify.com/embed/track/${url}`; } return null; }
    function load(){ const raw=(urlEl&&urlEl.value||'').trim(); const src=normalizeToEmbed(raw); if(!src){ setStatus('URL tidak dikenali. Gunakan tautan Spotify: track/album/playlist.'); return; } playerEl.innerHTML=`<iframe style="border-radius:10px" src="${src}" width="100%" height="112" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>`; setStatus('Memuat Spotify Embed…'); }
    if(loadBtn) loadBtn.addEventListener('click', load);
    if(urlEl) urlEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter') load(); });
  })();

  // YouTube Search overlay (Data API v3)
  (function(){
    const YT_API_KEY = "AIzaSyBlRhTTd2jWkk5tG570qRFyuhRKqWnGgL0"; // base
    const panel=document.getElementById('yt-search-float');
    const listEl=document.getElementById('yt-search-list');
    const closeBtn=document.getElementById('yt-search-close');
    const qEl=document.getElementById('yt-url');
    const statusEl=document.getElementById('yt-status');
    function setStatus(t){ if(statusEl) statusEl.textContent=t; }
    function open(){ panel&&panel.classList.remove('hidden'); }
    function close(){ panel&&panel.classList.add('hidden'); }
    window.toggleSearch=function(){ if(!panel) return; if(panel.classList.contains('hidden')) open(); else close(); };
    async function search(q){ try{ if(!q){ open(); listEl.innerHTML='<div style="font-size:11px;color:var(--muted)">Masukkan kata kunci…</div>'; return; } open(); listEl.innerHTML='<div style="font-size:11px;color:var(--muted)">Mencari…</div>'; const url=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=8&q=${encodeURIComponent(q)}&key=${YT_API_KEY}`; const resp=await fetch(url); const data=await resp.json(); const items=data.items||[]; listEl.innerHTML=''; if(!items.length){ listEl.innerHTML='<div style="font-size:11px;color:var(--muted)">Tidak ada hasil.</div>'; return; } const frag=document.createDocumentFragment(); items.forEach(it=>{ const vid=it?.id?.videoId; const sn=it?.snippet||{}; const t=sn?.title||''; const th=sn?.thumbnails?.medium||sn?.thumbnails?.default; const el=document.createElement('div'); el.className='search-item'; el.setAttribute('data-vid', vid||''); el.innerHTML=`<div class="search-thumb">${th?`<img src="${th.url}" alt="">`:''}</div><div class="search-meta"><div class="search-title-line">${t.replace(/</g,'&lt;')}</div></div>`; frag.appendChild(el); }); listEl.appendChild(frag); } catch(e){ console.warn(e); listEl.innerHTML='<div style="font-size:11px;color:var(--muted)">Gagal memuat hasil.</div>'; open(); } }
    window.__ytDoSearch=search;
    if(listEl){ listEl.addEventListener('click',(ev)=>{ const item=ev.target.closest('.search-item'); if(!item) return; const vid=item.getAttribute('data-vid'); if(!vid) return; try{ window.__ytEnsure && window.__ytEnsure(vid); setStatus('Loaded: '+vid);}catch(_){} close(); }); }
    if(closeBtn) closeBtn.addEventListener('click', close);
    if(qEl){ qEl.addEventListener('keydown',(e)=>{ if(e.key==='Enter'){ const q=(qEl&&qEl.value||'').trim(); if(!q) open(); else search(q); } }); }
  })();
</script>
</body>
</html>
